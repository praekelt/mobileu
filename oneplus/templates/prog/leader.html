{% extends "core/main.html" %}

{% block title %}Leaderboards{% endblock %}
{% block page_descriptor_text %}Leaderboards{% endblock %}

{% block content %}
    {% load humanize %}
    {% load oneplus_extras %}
    <article class="content squash-accent">
        <div class="text heading">
            {% if position %}
                <p>{{ header_2 }} <span class="purple-front">{{ position|ordinal_extra:'sup' }} place</span></p>
            {% endif %}
        </div>

        {% if class_board %}
            <article class="card border-color-accent">
                <section class="top">
                    <img src="/media/img/leaderboard/leaderboard_class.png" width="100%" height="auto"/>
                    <h3 class="card-top-phrase">Grade Leaderboard</h3>
                </section>
                {% if class_board.position %}
                    <hr class="hr-accent" />
                    <section class="bottom">
                        <div class="center-font">{{ user.name }}, you're currently in</div>
                        <div class="center-font color-accent funky-number">{{ class_board.position|ordinal_extra:'sup' }} place</div>
                    </section>
                {% endif %}
                {% if class_board.active %}
                    <hr class="hr-accent" />
                    <section class="bottom">
                        <table class="card-table">
                            {% for participant in class_board.board %}
                                <tr>
                                    <td class="funky-number color-accent">{{ participant.position|stringformat:"d" }}</td>
                                    <td>{{ participant.name }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </section>
                {% endif %}
                <hr class="hr-accent" />
                <section class="bottom">
                    <form class="no-pad" method="post">{% csrf_token %}
                        {% if class_board.active %}
                            <input type="hidden" name="board.class.active" value="false" />
                            <div class="center-font"><input class="link form-link" type="submit" value="Show less"></div>
                        {% else %}
                            <input type="hidden" name="board.class.active" value="true" />
                            <div class="center-font"><input class="link form-link" type="submit" value="Show all"></div>
                        {% endif %}
                    </form>
                </section>
            </article>
        {% endif %}


        {% if school_board %}
            <article class="card border-color-accent">
                <section class="top">
                    <img src="/media/img/leaderboard/leaderboard_school.png" width="100%" height="auto"/>
                    <h3 class="card-top-phrase">School Leaderboard</h3>
                </section>
                {% if school_board.position %}
                    <hr class="hr-accent" />
                    <section class="bottom">
                        <div class="center-font">Your school is currently in</div>
                        <div class="center-font color-accent funky-number">{{ school_board.position|ordinal_extra:'sup' }} place</div>
                    </section>
                {% endif %}
                {% if school_board.active %}
                    <hr class="hr-accent" />
                    <section class="bottom">
                        <table class="card-table">
                            {% for participant in school_board.board %}
                                <tr>
                                    <td class="funky-number color-accent">{{ participant.position|stringformat:"d" }}</td>
                                    <td>{{ participant.name }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </section>
                {% endif %}
                <hr class="hr-accent" />
                <section class="bottom">
                    <form class="no-pad" method="post">{% csrf_token %}
                        {% if school_board.active %}
                            <input type="hidden" name="board.school.active" value="false" />
                            <div class="center-font"><input class="link form-link" type="submit" value="Show less"></div>
                        {% else %}
                            <input type="hidden" name="board.school.active" value="true" />
                            <div class="center-font"><input class="link form-link" type="submit" value="Show all"></div>
                        {% endif %}
                    </form>
                </section>
            </article>
        {% endif %}


        {% if national_board %}
            <article class="card border-color-accent">
                <section class="top">
                    <img src="/media/img/leaderboard/leaderboard_national.png" width="100%" height="auto"/>
                    <h3 class="card-top-phrase">National Leaderboard</h3>
                </section>
                {% if national_board.position %}
                    <hr class="hr-accent" />
                    <section class="bottom">
                        <div class="center-font">{{ user.name }}, you're currently in</div>
                        <div class="center-font color-accent funky-number">{{ national_board.position|ordinal_extra:'sup' }} place</div>
                    </section>
                {% endif %}
                {% if national_board.active %}
                    <hr class="hr-accent" />
                    <section class="bottom">
                        <table class="card-table">
                            {% for participant in national_board.board %}
                                <tr>
                                    <td class="funky-number color-accent">{{ participant.position|stringformat:"d" }}</td>
                                    <td>{{ participant.name }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </section>
                {% endif %}
                <hr class="hr-accent" />
                <section class="bottom">
                    <form class="no-pad" method="post">{% csrf_token %}
                        {% if national_board.active %}
                            <input type="hidden" name="board.national.active" value="false" />
                            <div class="center-font"><input class="link form-link" type="submit" value="Show less"></div>
                        {% else %}
                            <input type="hidden" name="board.national.active" value="true" />
                            <div class="center-font"><input class="link form-link" type="submit" value="Show all"></div>
                        {% endif %}
                    </form>
                </section>
            </article>
        {% endif %}
    </article>

{% endblock %}
