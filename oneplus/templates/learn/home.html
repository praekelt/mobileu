{% extends "core/main.html" %}

{% block title %}WELCOME{% endblock %}

{% block content %}
    {% load humanize %}

    {% if state.home_tasks_today < state.home_required_tasks %}
        {% if not state.questions_complete %}
            {% if sumit %}
                <div class="text heading grey-back"><p>Hello {{ user.name }}. It's SUMit! Week, are you ready?</p></div>
            {% else %}
                <div class="text heading grey-back"><p>Hello {{ user.name }}. Ready to take the challenge?</p></div>
            {% endif %}
        {% endif %}
    {% endif %}
    {%  if not sumit %}
        <div class="dayheading">
            <div class="text {% if state.home_day == 0 %} present {% elif state.home_day > 0 %} past {% elif state.home_day < 0 %} future {% endif %}"><p>1<br/>DAY</p></div>
            <div class="text {% if state.home_day == 1 %} present {% elif state.home_day > 1 %} past {% elif state.home_day < 1 %} future {% endif %}"><p>2<br/>DAY</p></div>
            <div class="text {% if state.home_day == 2 %} present {% elif state.home_day > 2 %} past {% elif state.home_day < 2 %} future {% endif %}"><p>3<br/>DAY</p></div>
            <div class="text {% if state.home_day == 3 %} present {% elif state.home_day > 3 %} past {% elif state.home_day < 3 %} future {% endif %}"><p>4<br/>DAY</p></div>
            <div class="text {% if state.home_day == 4 %} present {% elif state.home_day > 4 %} past {% elif state.home_day < 4 %} future {% endif %}"><p>5<br/>DAY</p></div>
        </div>
    {% endif %}

    {% if sumit %}
        <div class="center-font content darkgrey-back">
            <div class="pad-bottom"><span class="large-font">SUMit! Week</span></div>
            <div><span class="text badge-award"><img class="badge-img" src="{{ sumit.url }}"></span></div>
            <div>
                <span class="text-line">
                    <p>Current level:
                        <b class="{% if sumit.level == 'Basecamp' or sumit.level == 'Summit' %} green-front {% elif sumit.level == 'Foothills' %} yellow-front {% elif sumit.level == 'Cliffs' %} purple-front {% else %} cyan-front {% endif %}">{{ sumit.level }}</b>
                    </p>
                </span>
            </div>
        </div>
    {% endif %}


    <div class="content">
        <p><span class="green-front xlarge-font">{{ state.home_tasks|stringformat:"02d" }}</span> Tasks Completed</p>
        <p><span class="green-front xlarge-font">{{ state.home_correct|stringformat:"02d" }}</span> Correct Answers</p>
        {% if state.home_goal > 0 %}
            <p class="green-front"><span class="green-front xlarge-font">{{ state.home_goal|stringformat:"02d" }}</span> To go to win Airtime</p>
        {% else %}
            <p class="green-front"><span class="green-front xlarge-font">R{{ 5|stringformat:"01d" }}</span> Airtime Won</p>
        {% endif %}

    {% if not state.questions_complete %}
        {% if state.home_tasks_week >= 15 %}
            <p class="green-front large-font">This week's revision complete. Come back Monday for more{% if redo %} or <a class="redo" href="redo">redo today's incorrect answers</a>{% endif %}.</p>
        {% elif state.home_tasks_today >= state.home_required_tasks %}
            <p class="green-front large-font">Today's revision complete. Come back tomorrow for more{% if redo %} or <a class="redo" href="redo">redo today's incorrect answers</a>{% endif %}.</p>
        {% else %}
            {% if not sumit %}
                <a class="button green-back grey-front" href="next">Go on Take the Challenge</a>
            {% else %}
                <a class="button green-back grey-front" href="sumit">Start SUMit!</a>
            {% endif %}
        {%  endif %}
    {% else %}
         <p class="green-front large-font">You've finished all of the OnePlus questions!
             We'll send you an SMS when we have more questions for you.</p>
    {% endif %}

    </div>

    {% if event_name and not sumit %}
        <form name="event" action="#" method="post">
            {% csrf_token %}
            <div class="content">
                {% if first_sitting %}
                    <input class="button green-back grey-front" type="submit" name="take_event" value="Take the {{ event_name }}">
                {% else %}
                    <input class="button green-back grey-front" type="submit" name="take_event" value="Finish {{ event_name }}">
                {% endif %}
            </div>
        </form>
    {% endif %}

    <div class="weeksummary">
        <div class="text badge" onclick="window.location='/badges'">
            <div class="right-font"><li class="icon badges"></li></div>
            <div class="left-font"><span class="large-font">{{ state.home_badges }}</span><br/>BADGES</div>
        </div>
        <div class="text point" onclick="window.location='/points'">
            <div class="right-font"><li class="icon points"></li></div>
            <div class="left-font"><span class="large-font">{{ state.home_points }}</span><br/>POINTS</div>
        </div>
        <div class="text place" onclick="window.location='/leader'">
            <div class="right-font"><li class="icon leaderboard"></li></div>
            <div class="left-font"><span class="large-font">{{ state.home_position|ordinal }}</span><br/>PLACE</div>
        </div>


    </div>

{% endblock %}
